<h1 class="mb-4">Employees</h1>

<!-- ðŸŸ© Navigation button to go to Departments dashboard -->
<div class="text-end mb-3">
  <%= link_to "Departments", departments_path, class: "btn btn-dark" %>
</div>

<!-- ðŸŸ© SEARCH + FILTER BOX -->
<div class="card p-3 mb-4 shadow-sm">
  <%= form_with url: employees_path, method: :get, local: true, class: "row g-3" do %>

    <!-- ðŸŸ© Search field -->
    <div class="col-md-4">
      <%= text_field_tag :search, params[:search], 
            placeholder: "Search by name or email",
            class: "form-control" %>
    </div>

    <!-- ðŸŸ© Department filter dropdown -->
    <div class="col-md-4">
      <%= select_tag :department_id,
            options_from_collection_for_select(@departments, :id, :name, params[:department_id]),
            include_blank: "Filter by Department",
            class: "form-select" %>
    </div>

    <!-- ðŸŸ© Search button -->
    <div class="col-md-2">
      <%= submit_tag "Search", class: "btn btn-primary w-100" %>
    </div>

    <!-- ðŸŸ© Reset button -->
    <div class="col-md-2">
      <%= link_to "Reset", employees_path, class: "btn btn-secondary w-100" %>
    </div>

  <% end %>
</div>

<!-- Add Employee Button -->
<div class="mb-3">
  <%= link_to "Add New Employee", new_employee_path, class: "btn btn-primary" %>
</div>

<!-- EMPLOYEE TABLE -->
<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Salary</th>
      <th>Department</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @employees.each do |employee| %>
      <tr>
        <td><%= "#{employee.first_name} #{employee.last_name}" %></td>
        <td><%= employee.email %></td>
        <td><%= number_to_currency(employee.salary, unit: "â‚¹ ") %></td>
        <td><%= employee.department.name %></td>

        <!-- ðŸŸ© NEW: Better action buttons with icons -->
        <td class="d-flex gap-2">

          <!-- Show -->
          <%= link_to employee, class: "btn btn-info btn-sm text-white" do %>
            <i class="bi bi-eye"></i> Show
          <% end %>

          <!-- Edit -->
          <%= link_to edit_employee_path(employee), class: "btn btn-warning btn-sm text-white" do %>
            <i class="bi bi-pencil-square"></i> Edit
          <% end %>

          <!-- Delete -->
          <%= button_to employee,
                        method: :delete,
                        data: { confirm: "Are you sure?" },
                        class: "btn btn-danger btn-sm text-white" do %>
            <i class="bi bi-x-circle"></i> Delete
          <% end %>

        </td>

      </tr>
    <% end %>
  </tbody>
</table>
